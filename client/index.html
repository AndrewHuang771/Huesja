<!DOCTYPE html>
<html>
<head>
	<title>Online Orchestra</title>
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<script type="text/javascript" src="javascript/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="javascript/main.js"></script>
	<script type="text/javascript" src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
	<script type="text/javascript" src="javascript/pianokeys.js"></script>
	<script type="text/javascript" src="javascript/drumset.js"></script>
	<script type="text/javascript" src="javascript/guitarchords.js"></script>
	<script type="text/javascript" src="javascript/violinchords.js"></script>
</head>
<body>
<div id="wrapper2">
</div>
	<div id="wrapper">
		<div class="screen1">
		<div class="header">
			<h class="poo">Online Orchestra</h>
		</div>

			<div class="background">	
				<div class="trans">
				</div>
				<div class="standard">
					<p>An online concert</p>
					<p>experience.</p>
					<div><p>Play by yourself</p></div>
					<div><p> or with friends.</p></div>
					<br>
					<div class="solo" id="han" onclick="return false">
				<h onclick="isMultiplayer(false)">Solo</h>
			</div>
			<div class="multi" id="player" onclick="return true">
				<h onclick="isMultiplayer(true)">Concert</h>
			</div>
				</div>
			</div>
		</div>


		<div class="screen2">
		<div class="header2">
			<h class="poo">Pick your instrument</h>
		</div>

		<table class="table">
			<tr>
				<th><img onclick="chooseInstrument('piano');startPiano();" class="image" id="piano" src="../images/piano.png"></th>
				<th><img onclick="chooseInstrument('drums');startDrums();" class="image" id="drums" src="../images/drums.png"></th>
			</tr>
			<tr>
				<th><img onclick="chooseInstrument('guitar');startGuitar();" class="image" id="guitar" src="../images/guitar.png"></th>
				<th><img onclick="chooseInstrument('violin');startViolin();" class="image" id="violin" src="../images/violin.png"></th>
			</tr>
		</table>
		</div>

		<div class="screen21">
			<div class="header2">
				<h class="poo">Pick your instrument</h>
			</div>
			<form>
				<input type="text" id="username" class="input" placeholder="Enter your name">
			</form>	

			<table class="table">
				<tr>
					<th><img onclick="updateName();chooseInstrument('piano');flag(1)" class="image" id="pianomulti" src="../images/piano.png"></th>
					<th><img onclick="updateName();chooseInstrument('drums');flag(2)" class="image" id="drumsmulti" src="../images/drums.png"></th>
				</tr>
				<tr>
					<th><img onclick="updateName();chooseInstrument('guitar');flag(3)" class="image" id="guitarmulti" src="../images/guitar.png"></th>
					<th><img onclick="updateName();chooseInstrument('violin');flag(4)" class="image" id="violinmulti" src="../images/violin.png"></th>
				</tr>
			</table>
		</div>
		<div class="ugly">
		<div class="multiplayer">
			<div class="ovall">
			<p class="greet">Welcome to the multiplayer lobby screen.</p></div>

			<div class="bookshelf1" onclick="joinroom();setinstrument();">Join Room</div>

			<div class="bookshelf" onclick="createroom();setinstrument();">Create Room</div>
			<br>
<form>
				<br>
				<input type="text" id="roomvalue" class="input1" placeholder="Enter # to Join Room">
			</form>	
			

		</div>
		<div>
			<img src="images/fun.jpg" class="foot">
		</div>
		</div>

		<div class="screenPiano">
			<div class="header2">
			<h class="poo">Piano</h>
			</div>
			<img src="../images/piano3.jpg" class="keyboard" id="poopoo">
	<!-- 
			<button onclick="yoloswag()" style="position:absolute">res</button> -->
			<div class="key" onclick="keypress2(0)" id="key1">
			</div>
			<div class="key" onclick="keypress2(1)" id="key2">
			</div>
			<div class="key" onclick="keypress2(2)" id="key3">
			</div>
			<div class="key" onclick="keypress2(3)" id="key4">
			</div>
			<div class="key" onclick="keypress2(4)" id="key5">
			</div>
			<div class="key" onclick="keypress2(5)" id="key6">
			</div>
			<div class="key" onclick="keypress2(6)" id="key7">
			</div>
			<div class="key" onclick="keypress2(12)" id="key13">
			</div>
			<div class="key" onclick="keypress2(13)" id="key14">
			</div>
			<div class="key" onclick="keypress2(14)" id="key15">
			</div>
			<div class="key" onclick="keypress2(15)" id="key16">
			</div>
			<div class="key" onclick="keypress2(16)" id="key17">
			</div>
			<div class="key" onclick="keypress2(17)" id="key18">
			</div>
			<div class="key" onclick="keypress2(18)" id="key19">
			</div>
			<div class="key" onclick="keypress2(19)" id="key20">
			</div>
			<div class="key" onclick="keypress2(25)" id="key26">
			</div>
			<div class="key" onclick="keypress2(26)" id="key27">
			</div>
			<div class="key" onclick="keypress2(27)" id="key28">
			</div>
			<div class="key" onclick="keypress2(28)" id="key29">
			</div>
			<div class="key" onclick="keypress2(29)" id="key30">
			</div>
			<div class="key" onclick="keypress2(30)" id="key31">
			</div>
			<div class="key" onclick="keypress2(36)" id="key37">
			</div>
			<div class="key" onclick="keypress2(37)" id="key38">
			</div>
			<div class="key" onclick="keypress2(38)" id="key39">
			</div>
			<div class="key" onclick="keypress2(39)" id="key40">
			</div>
			<div class="key" onclick="keypress2(40)" id="key41">
			</div>
			<div class="key" onclick="keypress2(41)" id="key42">
			</div>
			<div class="key" onclick="keypress2(42)" id="key43">
			</div>
			<div class="key" onclick="keypress2(48)" id="key49">
			</div>
			<div class="key" onclick="keypress2(49)" id="key50">
			</div>
			<div class="key" onclick="keypress2(50)" id="key51">
			</div>
			<div class="key" onclick="keypress2(51)" id="key52">
			</div>
			<div class="key" onclick="keypress2(52)" id="key53">
			</div>
			<div class="key" onclick="keypress2(53)" id="key54">
			</div>
			<div class="key" onclick="keypress2(54)" id="key55">
			</div>
			<div class="key" onclick="keypress2(60)" id="key61">
			</div>

			<div class="blackKey1" onclick="keypress2(7)" id="key8">
			</div>
			<div class="blackKey2" onclick="keypress2(8)" id="key9">
			</div>
			<div class="blackKey3" onclick="keypress2(9)" id="key10">
	        </div>
	        <div class="blackKey4" onclick="keypress2(10)" id="key11">
	        </div>
	        <div class="blackKey5" onclick="keypress2(11)" id="key12">
	        </div>
	        <div class="blackKey6" onclick="keypress2(20)" id="key21">
	        </div>
	        <div class="blackKey7" onclick="keypress2(21)" id="key22">
	        </div>
	                <div class="blackKey8" onclick="keypress2(22) " id="key23">
	                </div>
	                <div class="blackKey9" onclick="keypress2(23)" id="key24">
	                </div>
	                <div class="blackKey10" onclick="keypress2(24)" id="key25">
	                </div>
	                <div class="blackKey11" onclick="keypress2(31)" id="key32">
	                </div>
	                <div class="blackKey12" onclick="keypress2(32)" id="key33">
	                </div>
	                <div class="blackKey13" onclick="keypress2(33)" id="key34">
	                </div>
	                <div class="blackKey14" onclick="keypress2(34)" id="key35">
	                </div>
	                <div class="blackKey15" onclick="keypress2(35)" id="key36">
	                </div>
	                <div class="blackKey16" onclick="keypress2(43)" id="key44">
	                </div>
	                <div class="blackKey17" onclick="keypress2(44)" id="key45">
	                </div>
	                <div class="blackKey18" onclick="keypress2(45)" id="key46">
	                </div>
	                <div class="blackKey19" onclick="keypress2(46)" id="key47">
	                </div>
	                <div class="blackKey20" onclick="keypress2(47)" id="key48">
	                </div>
	                <div class="blackKey21" onclick="keypress2(55)" id="key56">
	                </div>
	                <div class="blackKey22" onclick="keypress2(56)" id="key57">
	                </div>
	                <div class="blackKey23" onclick="keypress2(57)" id="key58">
	                </div>
	                <div class="blackKey24" onclick="keypress2(58)" id="key59">
	                </div>
	                <div class="blackKey25" onclick="keypress2(59)" id="key60">
	                </div>

	                <div class="info">
	                	<p>Press "shift" to move up an octave</p>
	                	<p>Press "ctrl" to move down an octave</p>
	                </div>
		</div>

		<div class="screenDrums">
			<div class="header3">
			<h class="poo">Drums</h>
			</div>
			<img src="images/drumset.png" class="book">

			<div class="crash">

			</div>
			<div class="ride">

			</div>
			<div class="tom1">

			</div>
			<div class="tom2">

			</div>
			<div class="hihat">

			</div>
			<div class="snare">

			</div>
			<div class="bass">
			</div>
		</div>

	 	<div class="screenGuitar">
	 		<div class="header4">
	 			<p>Guitar</p>
	 		</div>
	 		<img src="images/guitar.jpg" class="zoom">
	 		<div class="text">
	 			<p>Use the keyboard to play chords</p>
	 		</div>
	 	</div>

	 	<div class="screenViolin">
	 		<div class="header4">
	 			<p>Violin</p>
	 		</div>
	 		<img src="images/violin.jpg" class="zoom">
	 		<div class="text">
	 			<p>Use the keyboard to play</p>
	 			<p>and "shift" for accidentals</p>
	 		</div>
	 	</div>
	</div>

	<script>
		var socket = io();

		function isMultiplayer(boole) {
			socket.emit('gameSetting', boole);
		}

		function chooseInstrument(instrument) {
			socket.emit('chooseInstrument', instrument);
		}

		function updateName() {
			var username = document.getElementById("username").value;
			socket.emit('updateUsername', username);
		}

		function joinroom() {
	    	var roomNumber = document.getElementById("roomvalue").value;
	     	if (roomNumber == "") {
	        	alert("The field is empty");
	      	} else {
	        	socket.emit('joinRoom', roomNumber); 
	      	}
		}

		function createroom() {
	      	var roomNumber = Math.floor(Math.random() * 100000); 
	      
	      	socket.emit('newRoom', roomNumber); 
		}

		function globalSound(number) {
			socket.emit('globalSound', number);
			socket.emit('highlightPlayer'); 
		}

		socket.on('playSound', function(number, socketID) {
			piano[number].pause();
			piano[number].currentTime = 0;
			piano[number].play();
		});

		socket.on('playDrums', function(number, socketID) {
			drum[number].pause();
			drum[number].currentTime = 0; 
			drum[number].play(); 
		});

		socket.on('playGuitar', function(number, SocketID) {
			guitar[number].pause();
			guitar[number].currentTime = 0;
			guitar[number].play(); 
		});

		socket.on('playViolin', function(number, SocketID) {
			violin[number].pause();
			violin[number].currentTime = 0;
			violin[number].play();
		});

		socket.on('highlightMe', function(ID) {
			var user = document.getElementById(String(ID));
			var rand1 = Math.floor(Math.random() * 256);
			var rand2 = Math.floor(Math.random() * 256);
			var rand3 = Math.floor(Math.random() * 256); 
			user.style.color = 'rgb(' + rand1 + ',' + rand2 + ',' + rand3 + ')';
		});
				
		socket.on('invalidRoom', function() {
		    alert("There is no such room! (Either that or you ran into the rare case of a duplicate room generation, in which case you should quit and go buy a lottery ticket!"); 
		});
		
		socket.on('lobby', function() {
		    //Throw this dude into the lobby
		    socket.emit('whatRoom');
		});

		socket.on('roomNumber', function(roomNumber) {
		    socket.emit('showPlayers', roomNumber);    
		}); 

		socket.on('displayNames', function(members, roomNumber, IDlist){
			if (instrument == 1) {
				document.getElementById("wrapper2").innerHTML = '<div class="screenPiano"><div class="header2"><h class="poo">Piano</h></div><img src="../images/piano3.jpg" class="keyboard" id="poopoo"><div class="key" onclick="globalSound(0);keypress2(0)" id="key1"></div><div class="key" onclick="globalSound(1);keypress2(1)" id="key2"></div><div class="key" onclick="globalSound(2);keypress2(2)" id="key3"></div><div class="key" onclick="globalSound(3);keypress2(3)" id="key4"></div><div class="key" onclick="globalSound(4);keypress2(4)" id="key5"></div><div class="key" onclick="globalSound(5);keypress2(5)" id="key6"></div><div class="key" onclick="globalSound(6);keypress2(6)" id="key7"></div><div class="key" onclick="globalSound(12);keypress2(12)" id="key13"></div><div class="key" onclick="globalSound(13);keypress2(13)" id="key14"></div><div class="key" onclick="globalSound(14);keypress2(14)" id="key15"></div><div class="key" onclick="globalSound(15);keypress2(15)" id="key16"></div><div class="key" onclick="globalSound(16);keypress2(16)" id="key17"></div><div class="key" onclick="globalSound(17);keypress2(17)" id="key18"></div><div class="key" onclick="globalSound(18);keypress2(18)" id="key19"></div><div class="key" onclick="globalSound(19);keypress2(19)" id="key20"></div><div class="key" onclick="globalSound(25);keypress2(25)" id="key26"></div><div class="key" onclick="globalSound(26);keypress2(26)" id="key27"></div><div class="key" onclick="globalSound(27);keypress2(27)" id="key28"></div><div class="key" onclick="globalSound(28);keypress2(28)" id="key29"></div><div class="key" onclick="globalSound(29);keypress2(29)" id="key30"></div><div class="key" onclick="globalSound(30);keypress2(30)" id="key31"></div><div class="key" onclick="globalSound(36);keypress2(36)" id="key37"></div><div class="key" onclick="globalSound(37);keypress2(37)" id="key38"></div><div class="key" onclick="globalSound(38);keypress2(38)" id="key39"></div><div class="key" onclick="globalSound(39);keypress2(39)" id="key40"></div><div class="key" onclick="globalSound(40);keypress2(40)" id="key41"></div><div class="key" onclick="globalSound(41);keypress2(41)" id="key42"></div><div class="key" onclick="globalSound(42);keypress2(42)" id="key43"></div><div class="key" onclick="globalSound(48);keypress2(48)" id="key49"></div><div class="key" onclick="globalSound(49);keypress2(49)" id="key50"></div><div class="key" onclick="globalSound(50);keypress2(50)" id="key51"></div><div class="key" onclick="globalSound(51);keypress2(51)" id="key52"></div><div class="key" onclick="globalSound(52);keypress2(52)" id="key53"></div><div class="key" onclick="globalSound(53);keypress2(53)" id="key54"></div><div class="key" onclick="globalSound(54);keypress2(54)" id="key55"></div><div class="key" onclick="globalSound(60);keypress2(60)" id="key61"></div><div class="blackKey1" onclick="globalSound(7);keypress2(7)" id="key8"></div><div class="blackKey2" onclick="globalSound(8);keypress2(8)" id="key9"></div><div class="blackKey3" onclick="globalSound(9);keypress2(9)" id="key10"></div><div class="blackKey4" onclick="globalSound(10);keypress2(10)" id="key11"></div><div class="blackKey5" onclick="globalSound(11);keypress2(11)" id="key12"></div><div class="blackKey6" onclick="globalSound(20);keypress2(20)" id="key21"></div><div class="blackKey7" onclick="globalSound(21);keypress2(21)" id="key22"></div><div class="blackKey8" onclick="globalSound(22);keypress2(22)" id="key23"></div><div class="blackKey9" onclick="globalSound(23);keypress2(23)" id="key24"></div><div class="blackKey10" onclick="globalSound(24);keypress2(24)" id="key25"></div><div class="blackKey11" onclick="globalSound(31);keypress2(31)" id="key32"></div><div class="blackKey12" onclick="globalSound(32);keypress2(32)" id="key33"></div><div class="blackKey13" onclick="globalSound(33);keypress2(33)" id="key34"></div><div class="blackKey14" onclick="globalSound(34);keypress2(34)" id="key35"></div><div class="blackKey15" onclick="globalSound(35);keypress2(35)" id="key36"></div><div class="blackKey16" onclick="globalSound(43);keypress2(43)" id="key44"></div><div class="blackKey17" onclick="globalSound(44);keypress2(44)" id="key45"></div><div class="blackKey18" onclick="globalSound(45);keypress2(45)" id="key46"></div><div class="blackKey19" onclick="globalSound(46);keypress2(46)" id="key47"></div><div class="blackKey20" onclick="globalSound(47);keypress2(47)" id="key48"></div><div class="blackKey21" onclick="globalSound(55);keypress2(55)" id="key56"></div><div class="blackKey22" onclick="globalSound(56);keypress2(56)" id="key57"></div><div class="blackKey23" onclick="globalSound(57);keypress2(57)" id="key58"></div><div class="blackKey24" onclick="globalSound(58);keypress2(58)" id="key59"></div><div class="blackKey25" onclick="globalSound(59);keypress2(59)" id="key60"></div><div class="info"><p>Press "shift" to move up an octave</p><p>Press "ctrl" to move down an octave</p></div></div>'
			} else if (instrument == 2) {
				document.getElementById("wrapper2").innerHTML = '<div class="screenDrums"><div class="header3"><h class="poo">Drums</h></div><img src="images/drumset.png" class="book"><div class="crash"></div><div class="ride"></div><div class="tom1"></div><div class="tom2"></div><div class="hihat"></div><div class="snare"></div><div class="bass"></div></div>';
			} else if (instrument == 3) {
				document.getElementById("wrapper2").innerHTML = '<div class="screenGuitar"><div class="header4"><p>Guitar</p></div><img src="images/guitar.jpg" class="zoom" ><div class="text"><p>Use the keyboard to play chords</p></div></div>';
			} else if (instrument == 4) {
				document.getElementById("wrapper2").innerHTML = '<div class="screenViolin"><div class="header4"><p>Violin</p></div><img src="images/violin.jpg" class="zoom"><div class="text"><p>Use the keyboard to play</p><p>and "shift" for accidentals</p></div></div>';
			}

		    document.getElementById("wrapper").innerHTML = "<div class='roomNumber' id='musicians'>Room Number:" + roomNumber;
		    
		    for (var i in members) {
			    var node = document.createElement("LI");
			    node.setAttribute("id", String(IDlist[i]));
			    node.setAttribute("class", 'node'); 
			    console.log(IDlist[i]); 
			    var textnode = document.createTextNode(members[i]);
			    node.appendChild(textnode);
			    document.getElementById("musicians").appendChild(node);		    	
		    }

		    console.log('--------------');
		    for (var i = 0; i < members.length; i++) {
		      console.log(members[i].name); 
		    }
		});


	</script>
</body>
</html>